# League of Legends Quiz and Rank Lookup Using Riot API
#### Video Demo:  <URL HERE>
#### Description:
This websites purpose is to let the user take a 5 question quiz about League of Legends, then the website will use the answers that the user gave to recommend a lane for them to play in the game. There are 5 lanes in League of Legends, so the recommendation is based on an algorithm that analyzes 5 scores from the given answers.\
This websites secondary purpose is to allow the user to look up their rank by entering their public account information. League of Legends accounts consist of a username and a tagline, for example: Summoner#1234. Summoner is the username, 1234 is the tagline, and the # is typically displayed between to separate the two when viewing an account. When they enter this information, the website will dynamically return a greeting with the players current rank in the game.\
\
**DISCLAIMER: IF YOU WANT TO RUN THIS WITH RANKED LOOKUP, MAKE A FILE NAMED ".env" IN THE ROOT AND MAKE A SINGLE LINE WITH "RIOT_API_KEY=your-developer-key-here".**\
\
This website started as a static website, but I quickly found that I was quite comfortable in everything I was developing. I had learned JS for a few months prior to starting CS50, so many of the features I was implementing were slightly more advanced versions of things I have tried before (buttons that update and give their value to a JS function, for example). As such, I decided to go beyond making a static website. I had a lot of trouble understanding flask, and I thought that it was a bit out of my comfort zone because I am not as proficient in python as JS. Therefore, I decided to try out node.js to make a backend. I had a fairly weak understanding of what a backend actually is going into this, but I learned quickly once I decided to implement the last challenge in my website, which truly stretched my ability. This final goal was to implement an API. I have known about APIs for some time, but they are extremely intimidating. I decided that in order to challenge myself and take a massive step as a programmer, I would learn to use the Riot API for this project. I will talk about each of these aspects in detail in the following sections. Below is a list of the sections to come:\
\
**Static Website Development**\
-index.html\
-style.css\
-script.js\
**Server Development and API Use**\
-node js Usage\
-server.js

## Static Website Development:
The first feature that I wanted to implement on my website was a quiz that let users answer 5 questions, then receive a recommendation on what lane to play in the game League of Legends. These files are the 3 which ended up in the /public folder: script.js, index.html, and style.css.\
\
**index.html** Step 1 was to set up index.html and make a webpage where I can present a question to the user, and give them 4 options to choose from. This foundation is reused as buttons are updated for each new question. Then, below the quiz interface is a section for looking up a summoner's rank. This is a simple set of 2 text inputs, which take whatever the user entered and use them to look up their rank. This can be searched as much as you want, so there is no need to validate the user's input. If they enter nonsense, it will simply not return any info.\
\
**style.css** This style sheet is simple, but was difficult to write at first. It is important to understand what a "block" element is in html, and how that relates to centering it. Also, the nature of parent and child relationships for centering elements. The *.centered* class is used to center text elements, which is quite easy. Simply using text-align: centered will center this text and give a nice foundation for centered elements. The *.centered-block* class is used to center block elements as children of centered text elements. By using margin: 0 auto, these elements will automatically space themselves out evenly on the page based on my HTML and where there are breaks.\
\
**script.js** This script is the most important file in this project, and makes this webpage dynamic by updating elements and communicating with my backend server. This script listens for a click on any of the buttons, and upon click it runs compress() passing in the value of the buttons (aka the text in the button) as an argument. This compresses the string, removing spaces and special characters and making it all lowercase. This compressed text is then passed into the *scoreboard()* function. scoreboard() is a big if/else sequence that checks the argument against all possible answers. When the answer that was selected is found, the function will update some values on the scoreboard by increasing by 1. For example, mid++; bot++; would update the values for mid and bot by 1, increasing their score on the scoreboard. The compress function will then update a variable named "questionTracker++" which keeps track of which question we are on. The updated questionTracker value is then passed into *nextQuestion()* as an argument. The nextQuestion() function has a few features. Firstly, if it is question number 3, the response boxes are updated with the .bigger-box class to allow them to fit the longer responses for question 3. If it is question 4, the nextQuestion() function removes the .bigger-box class and returns them to normal size. If it is question 5, the function tallies the totals and finds the maximum score. Then, it builds a recommendation based on the number of lanes with the maximum score. This rec is then inserted as the text content within the h2 element, replacing all buttons. Regardless of which iteration nextQuestions() is passed from questionTracker, it will try to update the button values and the question based on the array which defines all of the questions and responses. Finally, at the bottom of script.js there are functions which interact with the backend of the server. I will touch on these a bit more when discussing server.js. Basically, there are three functions that navigate the information given by the Riot API. getSummonerData() is the main function. First, this function asks the server for information from the Riot API, searching the name and tagline provided. The returned info contains a unique account identifier, the puuid. This puuid is fed into puuidFunction(), which uses the puuid to fetch that accounts account id from the Riot API. Then, that account id is fed into statsFunction(), which uses the account id to fetch that accounts ranked stats from the Riot API. Those ranked stats are then printed into a div that shows the user's name and rank.

## Server Development and API Use:
The problem that I first encountered when setting up the API calls was that I did not know you can't access an API using the frontend. As such, I knew it was time to learn node js in order to actually talk to an API for the first time.\
\
**node js Usage** Node js was used to run a server to test my non-static website. There were a few tricky parts of setting up node js for the first time. If you want to run this file after downloading, you will need to download node js and first type "npm install". This will install the dependencies from package-lock.json. Then navigate to the root (/project/) and run "node server.js". This will start the server on localhost:3000.
**server.js** This file is shorter than script.js, but more complex. The first few lines all focus on getting the riot API key from the .env file and loading them into the server. Then, there are three base URLs which will be modified and used to make requests to the Riot API. These are formatted according to Riot API documentation. Then, at the bottom there is a line which uses express to serve the static files (/public i.e. index.html). The last and main component of server.js are the three express routes, which are /summoner, /puuid, and /stats. These each have very similar responsibilities and all involve talking to the Riot API. First, /summoner takes the game name and tagline passed from the client and call Riot API for info about that account. The puuid that is returned is passed back from client to server through /puuid, and again Riot API is called through a different base URL using the puuid to gain additional identifiers, including account id. Account id is passed from client to server again through /stats and then the Riot API is called for a final time through another URL, fetching information about the accounts ranked statistics. Finally, these ranked stats are passed back to the client for use.
